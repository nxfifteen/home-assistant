---
alias: nest_protect_emergency
hide_entity: true
trigger:
  platform: state
  entity_id:
  - sensor.hallway_nest_protect_co_status
  - sensor.hallway_nest_protect_smoke_status
  - sensor.kitchen_nest_protect_co_status
  - sensor.kitchen_nest_protect_smoke_status
  - sensor.landing_nest_protect_co_status
  - sensor.landing_nest_protect_smoke_status
  to: 'Emergency'

action:
  - service: notify.hass_synchat
    data_template:
      message: "An emergency has been detected on {{ trigger.to_state.attributes.friendly_name }} Please investigate IMMEDIATELY. #Nest #Protect #Emergency"
  - service: notify.alexa_media
    data:
      target: 
        - media_player.everywhere
      data:
        type: announce
      message: "An emergency has been detected on {{ trigger.to_state.attributes.friendly_name }}."