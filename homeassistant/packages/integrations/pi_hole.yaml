---
sensor:
- platform: pi_hole
  host: !secret pi_hole_host
  monitored_conditions:
    - ads_blocked_today
    - ads_percentage_today
    - dns_queries_today
    - queries_cached
    - queries_forwarded
    - unique_clients

- platform: template
  sensors:
    rpi_pihole:
      friendly_name: 'Pi-Hole'
      entity_id: []
      value_template: "{{ 'Online' if is_state('device_tracker.rpi_pihole', 'home') else 'Offline' }}"

binary_sensor:
  - platform: ping
    host: 8.8.8.8
    
# Pi-Hole switch
switch:
  - platform: command_line
    switches:
      pihole_temp_disable:
        command_on: !secret cmd_pi_hole_on
        command_off: !secret cmd_pi_hole_off

homeassistant:
  customize:
    sensor.pi_hole_ads_percentage_blocked_today:
      friendly_name: Percentage of Ad Traffic Blocked
      unit_of_measurement: '%'
      icon: mdi:ticket-percent
    
    sensor.pi_hole_ads_blocked_today:
      friendly_name: Ads Blocked Today
      icon: mdi:do-not-disturb
    
    sensor.pi_hole_dns_queries_cached:
      friendly_name: DNS Queries Cached
      icon: mdi:note-text
    
    sensor.pi_hole_dns_queries_forwarded:
      friendly_name: DNS Queries Forwarded
      icon: mdi:note-text
    
    sensor.pi_hole_dns_unique_clients:
      friendly_name: Unique Clients
      icon: mdi:desktop-classic
    
    switch.pihole_temp_disable:
      friendly_name: Disable PiHole