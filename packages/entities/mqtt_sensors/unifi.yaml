---
sensor:
- platform: mqtt
  name: unifi_client_count
  state_topic: "unifi/status/clientCount"
  value_template: '{{ value_json.val }}'
  
- platform: mqtt
  name: unifi_client_count_lan
  state_topic: "unifi/status/wifi/NxMESH/clientCount"
  value_template: '{{ value_json.val }}'
  
- platform: mqtt
  name: unifi_client_count_guest
  state_topic: "unifi/status/wifi/NxFriends/clientCount"
  value_template: '{{ value_json.val }}'
  
- platform: mqtt
  name: unifi_client_count_iot
  state_topic: "unifi/status/wifi/NxIoT/clientCount"
  value_template: '{{ value_json.val }}'

switch:
- platform: mqtt
  name: unifi_wifi_lan
  icon: mdi:wifi
  state_topic: "unifi/status/wifi/NxMESH/enabled"
  command_topic: "unifi/set/wifi/NxMESH/enabled"
  availability_topic: "unifi/connected"
  value_template: '{% if value_json.val == "true" %}on{% else %}off{% endif %}'
  payload_on: "true"
  payload_off: "false"
  payload_available: 2
  optimistic: false
  qos: 2
  retain: true
  
- platform: mqtt
  name: unifi_wifi_guest
  icon: mdi:wifi
  state_topic: "unifi/status/wifi/NxFriends/enabled"
  command_topic: "unifi/set/wifi/NxFriends/enabled"
  availability_topic: "unifi/connected"
  value_template: '{% if value_json.val == "true" %}on{% else %}off{% endif %}'
  payload_on: "true"
  payload_off: "false"
  optimistic: false
  payload_available: 2
  qos: 2
  retain: true
  
- platform: mqtt
  name: unifi_wifi_iot
  icon: mdi:wifi
  state_topic: "unifi/status/wifi/NxIoT/enabled"
  command_topic: "unifi/set/wifi/NxIoT/enabled"
  availability_topic: "unifi/connected"
  value_template: '{% if value_json.val == "true" %}on{% else %}off{% endif %}'
  payload_on: "true"
  payload_off: "false"
  optimistic: false
  payload_available: 2
  qos: 2
  retain: true
