---
alias: Restart Hallway IP Camera - By Sensor

trigger:
- platform: state
  entity_id: binary_sensor.gf_hallway_camera
  to:  'off'
  for:
    seconds: 30
  
action:
  - service: switch.turn_off
    data:
      entity_id: switch.gf_hallway_camera
      
  - delay: 00:00:30
      
  - service: switch.turn_on
    data:
      entity_id: switch.gf_hallway_camera
      
  - service: script.notify_join
    data_template:
      who: "stuart"
      title: 'Hallway Camera'
      value1: "The Hallway Camera crashed again! I've restarted it"
      
  - service: script.notify_engine
    data_template:
      channel: "hab"
      value1: "The Hallway Camera crashed again! I've restarted it"
      hastag: "#A.I. #CCTV #Failed #HouseKeeping #SudioCCTV"
