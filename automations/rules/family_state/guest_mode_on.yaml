---
alias: Guest Mode

trigger:
  platform: state
  entity_id:
    - person.john
    - person.maureen
    - person.allan
    - person.colin
    - person.irene
    - person.kayleigh
    - person.kev
    - person.khristen
    - person.mecha
    - person.scott
    - person.steve
  to: home

condition:
  condition: or
  conditions:
    - condition: state
      entity_id: person.john
      state: home

    - condition: state
      entity_id: person.maureen
      state: home

    - condition: state
      entity_id: person.allan
      state: home

    - condition: state
      entity_id: person.colin
      state: home

    - condition: state
      entity_id: person.irene
      state: home

    - condition: state
      entity_id: person.kayleigh
      state: home

    - condition: state
      entity_id: person.kev
      state: home

    - condition: state
      entity_id: person.khristen
      state: home

    - condition: state
      entity_id: person.mecha
      state: home

    - condition: state
      entity_id: person.scott
      state: home

    - condition: state
      entity_id: person.steve
      state: home

action:      
  - service: script.notify_join
    data_template:
      who: "stuart"
      title: 'Guest Mode - On'
      notification_id: "hass-guest-on"
      value1: '{{ trigger.to_state.attributes.friendly_name }} arrived.'
      value2: "I've turned on Guest Mode"

  - service: input_boolean.turn_on
    data:
      entity_id: input_boolean.guest_mode

  - service: input_boolean.turn_off
    data:
      entity_id: input_boolean.enable_washing_machine_notification

  - service: switch.turn_on
    data:
      entity_id: switch.adguard_filtering

  - service: switch.turn_on
    data:
      entity_id: switch.adguard_protection

  - service: switch.turn_on
    data:
      entity_id: switch.adguard_query_log

  - service: switch.turn_on
    data:
      entity_id: switch.adguard_safe_search

  - service: switch.turn_on
    data:
      entity_id: switch.adguard_safe_browsing

  - service: switch.turn_on
    data:
      entity_id: switch.adguard_parental_control